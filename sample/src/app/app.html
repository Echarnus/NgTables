<div class="demo-container">
  <header class="demo-header">
    <h1>{{ title() }}</h1>
    <p class="demo-subtitle">
      A comprehensive table component with advanced features including frozen columns, 
      expandable rows, sorting, and accessibility support.
    </p>
  </header>

  <main class="demo-main">
    <section class="demo-features">
      <h2>Features Demonstrated</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h3>🔒 Frozen Columns</h3>
          <p>ID column frozen on the left, Subscriptions on the right</p>
        </div>
        <div class="feature-card">
          <h3>📋 Row Selection</h3>
          <p>Multi-select with checkbox controls</p>
        </div>
        <div class="feature-card">
          <h3>📊 Sorting</h3>
          <p>Click any column header to sort data</p>
        </div>
        <div class="feature-card">
          <h3>📱 Responsive</h3>
          <p>Horizontal scrolling for narrow screens (200 rows demo data)</p>
        </div>
        <div class="feature-card">
          <h3>📄 Pagination</h3>
          <p>75 items per page with configurable page sizes</p>
        </div>
        <div class="feature-card">
          <h3>♿ Accessible</h3>
          <p>Full keyboard navigation and screen reader support</p>
        </div>
        <div class="feature-card">
          <h3>🎨 Custom Rendering</h3>
          <p>Status badges and formatted dates</p>
        </div>
      </div>
    </section>

    <section class="demo-table">
      <h2>Interactive Table</h2>
      
      <!-- Configuration Controls -->
      <div class="demo-controls">
        <h3>Table Configuration</h3>
        <div class="controls-grid">
          <label class="control-item">
            <input type="checkbox" 
                   [checked]="showExpandableRows()"
                   (change)="toggleExpandableRows()">
            <span>Expandable Rows</span>
          </label>
          
          <label class="control-item">
            <input type="checkbox" 
                   [checked]="enableSelection()"
                   (change)="toggleSelection()">
            <span>Row Selection</span>
          </label>
          
          <label class="control-item">
            <input type="checkbox" 
                   [checked]="enableMultiSelect()"
                   [disabled]="!enableSelection()"
                   (change)="toggleMultiSelect()">
            <span>Multi-Select (requires Row Selection)</span>
          </label>
          
          <label class="control-item">
            <input type="checkbox" 
                   [checked]="constrainWidth()"
                   (change)="toggleWidthConstraint()">
            <span>Constrain Width (shows horizontal scroll)</span>
          </label>
          
          <label class="control-item">
            <input type="checkbox" 
                   [checked]="makeFrozenColumnsVisible()"
                   (change)="toggleFrozenColumns()">
            <span>Enhanced Frozen Column Demo</span>
          </label>
          
          <label class="control-item">
            <input type="checkbox" 
                   [checked]="useRowTemplate()"
                   (change)="toggleRowTemplate()">
            <span>Use Template-based Rows (NEW!)</span>
          </label>
        </div>
      </div>
      
      <div class="table-wrapper" [class.constrained-width]="constrainWidth()">
        <ngt-table
          [data]="users()"
          [columns]="columns()"
          [config]="tableConfig()"
          (sortChange)="onSort($event)"
          (rowExpand)="onRowExpand($event)"
          (selectionChange)="onSelectionChange($event)"
          (cellClick)="onCellClick($event)"
          (rowClick)="onRowClick($event)"
          (pageChange)="onPageChange($event)"
          (pageSizeChange)="onPageSizeChange($event)">
          
          <!-- Template-based expandable row content with access to row data -->
          <ng-template #expandedRowTemplate let-user let-index="index" let-rowId="rowId" let-expanded="expanded">
            <div class="expanded-content">
              <div class="expanded-header">
                <h4>{{user.firstName}} {{user.lastName}} - Detailed Information</h4>
                <span class="row-info">Row #{{index + 1}} | ID: {{rowId}} | Status: {{expanded ? 'Expanded' : 'Collapsed'}}</span>
              </div>
              
              <div class="user-details">
                <div class="detail-section">
                  <h5>📧 Contact Information</h5>
                  <div class="detail-item">
                    <strong>Primary Email:</strong> {{user.email}}
                  </div>
                  <div class="detail-item">
                    <strong>Phone:</strong> +1 (555) {{user.id}}{{user.id}}-{{1000 + user.id}}
                  </div>
                  <div class="detail-item">
                    <strong>Preferred Contact:</strong> Email
                  </div>
                </div>
                
                <div class="detail-section">
                  <h5>🏢 Company Details</h5>
                  <div class="detail-item">
                    <strong>Company:</strong> {{user.company}}
                  </div>
                  <div class="detail-item">
                    <strong>Department:</strong> {{user.role === 'Admin' ? 'Administration' : user.role === 'Manager' ? 'Management' : 'Development'}}
                  </div>
                  <div class="detail-item">
                    <strong>Employee ID:</strong> EMP-{{user.id.toString().padStart(4, '0')}}
                  </div>
                </div>
                
                <div class="detail-section">
                  <h5>📊 Account Statistics</h5>
                  <div class="detail-item">
                    <strong>Total Subscriptions:</strong> {{user.subscriptions}}
                  </div>
                  <div class="detail-item">
                    <strong>Account Status:</strong> 
                    <span class="status-badge status-{{user.status}}">{{user.status | titlecase}}</span>
                  </div>
                  <div class="detail-item">
                    <strong>Member Since:</strong> {{user.joinDate}}
                  </div>
                  <div class="detail-item">
                    <strong>Last Login:</strong> {{user.lastLogin}}
                  </div>
                </div>
                
                @if (user.role === 'Admin' || user.role === 'Manager') {
                  <div class="detail-section">
                    <h5>🔑 Administrative Access</h5>
                    <div class="detail-item">
                      <strong>Access Level:</strong> {{user.role === 'Admin' ? 'Full Administrator' : 'Department Manager'}}
                    </div>
                    <div class="detail-item">
                      <strong>Permissions:</strong> User Management, Reports{{user.role === 'Admin' ? ', System Settings' : ''}}
                    </div>
                  </div>
                }
                
                <div class="detail-section">
                  <h5>🎨 Custom Rendering Demo</h5>
                  <div class="detail-item">
                    <strong>Profile Picture:</strong>
                    <div class="profile-avatar">
                      <div class="avatar-circle">{{user.firstName.charAt(0)}}{{user.lastName.charAt(0)}}</div>
                    </div>
                  </div>
                  <div class="detail-item">
                    <strong>Quick Actions:</strong>
                    <div class="action-buttons">
                      <button class="action-btn primary" (click)="editUser(user)">✏️ Edit</button>
                      <button class="action-btn secondary" (click)="viewProfile(user)">👤 Profile</button>
                      <button class="action-btn" (click)="sendEmail(user)">📧 Email</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>
          
          <!-- Single cell template that handles different column types -->
          <ng-template #cellTemplate let-value let-row="row" let-column="column" let-index="index" let-rowId="rowId">
            @if (column.id === 'firstName') {
              <div class="user-name-cell">
                <div class="name-avatar">{{row.firstName.charAt(0)}}{{row.lastName.charAt(0)}}</div>
                <div class="name-info">
                  <div class="full-name">{{row.firstName}} {{row.lastName}}</div>
                  <div class="user-id">ID: {{row.id}}</div>
                </div>
              </div>
            } @else if (column.id === 'status') {
              <div class="status-cell">
                <span class="status-badge" [class]="'status-' + value">{{value}}</span>
                <div class="status-actions">
                  <button class="action-btn" (click)="editUser(row); $event.stopPropagation()">✏️</button>
                  <button class="action-btn" (click)="viewProfile(row); $event.stopPropagation()">👤</button>
                </div>
              </div>
            } @else {
              <!-- Fallback for other columns -->
              <span>{{value}}</span>
            }
          </ng-template>
        </ngt-table>
      </div>
    </section>

    <section class="demo-instructions">
      <h2>Try These Features</h2>
      <div class="instructions-grid">
        <div class="instruction-item">
          <strong>Sort columns:</strong> Click on any column header to sort the data
        </div>
        <div class="instruction-item">
          <strong>Select rows:</strong> Use checkboxes to select individual rows or all rows
        </div>
        <div class="instruction-item">
          <strong>Expand rows:</strong> Click the + button to show dynamic, template-based additional details
        </div>
        <div class="instruction-item">
          <strong>Pagination:</strong> Navigate through 200 items with 75 per page - change page size in the dropdown (NEW!)
        </div>
        <div class="instruction-item">
          <strong>Template-based content:</strong> Expandable rows now use ng-template with full access to row data, index, and state
        </div>
        <div class="instruction-item">
          <strong>Template-based rows:</strong> Toggle "Use Template-based Rows" to see custom row rendering with templates (NEW!)
        </div>
        <div class="instruction-item">
          <strong>Data volume:</strong> Table now has 200 rows demonstrating performance with larger datasets
        </div>
        <div class="instruction-item">
          <strong>Horizontal scroll:</strong> Enable "Constrain Width" to see frozen columns in action
        </div>
        <div class="instruction-item">
          <strong>Frozen columns:</strong> ID column stays on left, Subscriptions on right while scrolling
        </div>
        <div class="instruction-item">
          <strong>Enhanced frozen demo:</strong> Toggle the enhanced demo to see additional frozen columns
        </div>
        <div class="instruction-item">
          <strong>Keyboard navigation:</strong> Use Tab, Enter, and Space keys to navigate and interact
        </div>
        <div class="instruction-item">
          <strong>Check console:</strong> Open developer tools to see event logging
        </div>
      </div>
    </section>
  </main>

  <footer class="demo-footer">
    <p>
      Built with Angular {{ '19' }} • 
      <a href="https://github.com/Echarnus/NgTables" target="_blank" rel="noopener">
        View on GitHub
      </a>
    </p>
  </footer>
</div>

<router-outlet />